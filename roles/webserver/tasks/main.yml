---
- name: Add epel-release repo
  yum:
     name: epel-release
     state: present

- name: Installing Apache
  yum: 
       name: httpd
       state: installed

- name: Enabling httpd service and start the service
  service: 
        name: httpd
        enabled: yes
        state: started

- name: Install phpmyadmin
  yum:
     name: phpmyadmin
     state: latest

- name: Installing Remi Repository
  yum:
    name: https://rpms.remirepo.net/enterprise/remi-release-7.rpm
    state: present

- name: Installing php
  yum:
    name:
      - php
      - php-common
      - php-cli
      - php-gd
      - php-curl
      - php-mysqlnd
      - php-fpm
      - php-mysqli
    state: latest

- name: Install MySQL 5.7 repo
  yum: name=http://dev.mysql.com/get/mysql57-community-release-el7-8.noarch.rpm state=present


- name: Install MySQL
  yum:
    name: mysql-community-server
    state: present

- name: Install MySQL Community client
  yum:
    name: mysql-community-client
    state: present

- name: Install MySQL Python
  yum:
    name: MySQL-python
    state: present

- name: Start SQL Service
  service: name=mysqld state=restarted

- name: Install Git
  yum:
     name: git
     state: present
     update_cache: yes

- name: Add Docker repo
  get_url:
  url: https://download.docker.com/linux/centos/docker-ce.repo
  dest: /etc/yum.repos.d/docer-ce.repo
  become: yes

- name: Enable Docker Edge repo
    ini_file:
        dest: /etc/yum.repos.d/docer-ce.repo
        section: 'docker-ce-edge'
        option: enabled
        value: 0
    become: yes

- name: Enable Docker Test repo
    ini_file:
        dest: /etc/yum.repos.d/docer-ce.repo
        section: 'docker-ce-test'
        option: enabled
        value: 0
    become: yes

- name: Install Docker
    package:
        name: docker-ce
        state: latest
    become: yes

- name: Start Docker service
    service:
        name: docker
        state: started
        enabled: yes
    become: yes